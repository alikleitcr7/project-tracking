<div id="Users" class="Users v-container" v-cloak=v-cloak>

    @*<div class="buttons mb-2">
            <button type="button" v-on:click="users_openModal" class="s-btn s-btn-primary">New User &nbsp;<i class="glyphicon glyphicon-plus"></i></button>
        </div>*@

    <h4 v-show="!users.isLoading && !users.data.length ">
        <br />
        <span class="c-clickable-link" v-on:click="users_openModal">Click Here</span> to add
    </h4>

    <div class="input-group " style="max-width:300px">

        <input type="text" class="form-control" placeholder="Search" v-model="users.filterBy.keyword">

        <div class="input-group-btn">
            <button class="btn btn-default" type="submit" v-on:click="users_getAll(0)">
                <i class="glyphicon glyphicon-search"></i>
            </button>
        </div>

    </div>

    <section id="Pagination" class="c-pagination" v-show="usersTotalPages > 1">
        <div class="container">
            <paginate v-bind:page-count="usersTotalPages"
                      v-bind:container-class="users.dataPaging.pagination"
                      v-bind:prev-text="users.dataPaging.prev"
                      v-bind:next-text="users.dataPaging.next" v-bind:click-handler="users_pageClick">
            </paginate>
        </div>
    </section>

    <p class="c-display-message">{{users.isLoading ? 'Loading...':'&nbsp;'}}</p>

    <div v-show="users.data.length" class="Users c-table-data-container table-responsive"
         v-bind:class="{'lock-controls': users.isProcessing }">

        <table class="table">

            <thead>
                <tr>
                    <th style="width: 50px">Name</th>
                    <th>Email</th>
                    <th>Date of Birth</th>
                    <th></th>
                </tr>
            </thead>

            <tbody>

                <tr v-for="(item ,idx) in users.data">
                    <td>
                        {{item.fullName}}
                    </td>

                    <td>
                        {{item.email}}
                    </td>

                    <td>
                        {{users_isAdmin(item) ? '-': item.dateOfBirthDisplay}}
                    </td>

                    <td v-show="users_isAdmin(item)">
                     
                    </td>

                    <td v-show="!users_isAdmin(item)">
                        <button class="s-btn s-btn-sm s-btn-outline" type="button"
                                v-on:click="userRoles_edit(item.id)">
                            <i class="glyphicon glyphicon-file"></i>

                            Role
                        </button>
                        
                        <button class="s-btn s-btn-sm s-btn-outline" type="button"
                                v-on:click="supervisors_edit(item.id)">

                            <i class="glyphicon glyphicon-user"></i>
                            Supervising Teams ({{item.supervisingCount}})
                        </button>

                        <button class="s-btn s-btn-sm s-btn-outline" type="button"
                                v-on:click="users_edit(idx)">

                            <i class="glyphicon glyphicon-edit"></i>
                            Edit
                        </button>
                        <button class="s-btn s-btn-sm s-btn-danger" type="button"
                                v-on:click="users_delete(idx)">

                            <i class="glyphicon glyphicon-trash"></i>
                            Delete
                        </button>
                    </td>
                </tr>

            </tbody>
        </table>
    </div>

    <div class="modal" id="UserModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">

                    <div class="input-group-container">
                        <div class="input-group-item">
                            <label>First Name</label>
                            <input type="text" class="form-control" v-model="users.form.record.firstName" />
                        </div>
                        <div class="input-group-item">
                            <label>Last Name</label>
                            <input type="text" class="form-control" v-model="users.form.record.lastName" />
                        </div>
                    </div>
                    <div class="input-group-container">

                        <div class="input-group-item">
                            <label>Email</label>
                            <input type="text" class="form-control" v-model="users.form.record.email" />

                        </div>
                    </div>

                </div>

                <div class="modal-footer modal-footer-centered">
                    <p class="f-display-message">{{ users.form.message}}</p>
                    <div class="modal-buttons-container">
                        <button v-bind:disabled="users.form.isSaving" type="button" class="s-btn s-btn-primary" v-on:click="users_save">
                            Save
                        </button>
                        <button type="button" class="s-btn s-btn-outline" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="modal" id="SupervisorsModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>Teams</label>
                    <div class="checklist-container scrollable-container-400">

                        <p v-show="supervisors.isLoading">Loading teams....</p>
                        <p v-show="!supervisors.isLoading && !supervisors.data.length">There are Currently No Teams Added!</p>
                        <p v-for="(team, idx) in supervisors.data">
                            <input type="checkbox" :value="team.id" v-model="supervisors.form.record.teamIds" />
                            {{team.name}}
                        </p>
                    </div>
                </div>

                <div class="modal-footer modal-footer-centered">
                    <p class="f-display-message">
                        {{supervisors.form.message}}
                    </p>
                    <div class="modal-buttons-container">
                        <button v-bind:disabled="supervisors.form.isSaving" type="button" class="s-btn s-btn-primary" v-on:click="supervisors_save">
                            Save {{supervisors.form.isSaving ? '...':''}}
                        </button>
                        <button type="button" class="s-btn s-btn-outline" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="modal" id="UserRolesModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>Roles</label>
                    <div class="checklist-container scrollable-container-400">

                        <p v-show="userRoles.isLoading">Loading roles....</p>
                        <p v-show="!userRoles.isLoading && !userRoles.data.length">-</p>
                        <p v-for="(role, idx) in userRoles.data">
                            <input type="radio" :value="role.name" v-model="userRoles.form.record.role" />
                            {{role.name}}
                        </p>
                    </div>
                </div>

                <div class="modal-footer modal-footer-centered">
                    <p class="f-display-message">
                        {{userRoles.form.message}}
                    </p>
                    <div class="modal-buttons-container">
                        <button v-bind:disabled="userRoles.form.isSaving" type="button" class="s-btn s-btn-primary" v-on:click="userRoles_save">
                            Save {{userRoles.form.isSaving ? '...':''}}
                        </button>
                        <button type="button" class="s-btn s-btn-outline" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

@using ProjectTracking.DataContract
@using ProjectTracking.Data.Methods.Interfaces

@inject IProjectFilesMethods files

@{
    ViewData["Title"] = "Files";
    ProjectFile file = (ProjectFile)ViewData["File"];

    int fileId = (int)ViewData["FileId"];


    int? year = (int?)ViewData["Year"];
    int? month = (int?)ViewData["Month"];

    List<int> years = (List<int>)ViewData["Years"];
    List<int> months = (List<int>)ViewData["Months"];

    List<KeyValuePair<string, string>> insights = (List<KeyValuePair<string, string>>)ViewData["Insights"];

}

<div class="main-container">


    <h2>File "@(file.Name)"</h2>
    @*<h4>@(year.HasValue ? $"Year {year.Value}" : "") @(month.HasValue ? $"Month {month}" : "")</h4>*@

    <form>
        <input type="hidden" name="fileId" value="@fileId" />

        <div class="d-flex">

            <select class="form-control" name="year" style="width:100px">
                <option  selected="@(( !year.HasValue || (year.HasValue && year.Value == 0) ? "selected" : ""))" value="0">-</option>
                @foreach (var item in years)
                {
                    <option  selected="@((year.HasValue && year.Value == item ? "selected" : ""))" >@item</option>
                }
            </select>

            <button class="Button-Shared mx-3" type="submit"> <i class="glyphicon glyphicon-filter"></i> Filter</button>

        </div>

    </form>

    <div class="dashboard-insights">
        @foreach (var item in insights)
        {
            <partial name="~/views/shared/dashboardinsight.cshtml" model="item" />
        }
    </div>

    <table class="table">
        <tr>
            <th>From</th>
            <th>To</th>
            <th>Type Of Work</th>
            <th>Measurement Unit</th>
            <th>Number</th>
            <th>Comment</th>
        </tr>

        @foreach (TimeSheetActivity item in file.TimeSheetActivities)
        {
            <tr>
                <td>@item.FromDateDisplay</td>
                <td>@item.ToDateDisplay</td>
                <td>@item.TypeOfWorkDisplay</td>
                <td>@item.MeasurementUnitDisplay</td>
                <td>@item.Number</td>
                <td>@item.Comment</td>
            </tr>
        }
    </table>

</div>


@section styles{

    <link href="~/css/Dashboard.min.css" rel="stylesheet" />
}